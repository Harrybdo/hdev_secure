var Transformie={defaults:{inlineCSS:"*",stylesheets:!0,track:"*",centerOrigin:"margin"},toRadian:function(e){return e.indexOf("deg")!=-1?parseFloat(e,10)*(2*Math.PI/360):e.indexOf("grad")!=-1?parseFloat(e,10)*(Math.PI/200):parseFloat(e,10)},getTransformValue:function(e){return e["-webkit-transform"]||e["webkit-transform"]||e.transform||e.webkitTransform||e["-moz-transform"]||e["moz-transform"]||e.MozTransform||e.mozTransform},track:function(e){jQuery(e).unbind("propertychange").bind("propertychange",function(e){"style.webkitTransform"!=e.originalEvent.propertyName&&"style.MozTransform"!=e.originalEvent.propertyName&&"style.transform"!=e.originalEvent.propertyName||Transformie.applyMatrixToElement(Transformie.computeMatrix(Transformie.getTransformValue(this.style)),this)})},apply:function(e){jQuery(e).each(function(){var e=Transformie.getTransformValue(this.style);e&&Transformie.applyMatrixToElement(Transformie.computeMatrix(e),this)})},parseStylesheets:function(){for(var e=0;e<document.styleSheets.length;e++)if(!document.styleSheets[e].readOnly)for(var r=0;r<document.styleSheets[e].rules.length;r++){var t=Transformie.getTransformValue(document.styleSheets[e].rules[r].style);t&&Transformie.applyMatrixToSelector(Transformie.computeMatrix(t),document.styleSheets[e].rules[r].selectorText)}},applyMatrixToSelector:function(e,r){r.indexOf&&r.indexOf(":hover")!=-1||jQuery(r).each(function(){Transformie.applyMatrixToElement(e,this)})},applyMatrixToElement:function(e,r){r.filters["DXImageTransform.Microsoft.Matrix"]||(r.style.filter=(r.style.filter?"":" ")+"progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand')",Transformie.track(r)),r.filters["DXImageTransform.Microsoft.Matrix"].M11=e.elements[0][0],r.filters["DXImageTransform.Microsoft.Matrix"].M12=e.elements[0][1],r.filters["DXImageTransform.Microsoft.Matrix"].M21=e.elements[1][0],r.filters["DXImageTransform.Microsoft.Matrix"].M22=e.elements[1][1],Transformie.defaults.centerOrigin&&(r.style["margin"==Transformie.defaults.centerOrigin?"marginLeft":"left"]=-(r.offsetWidth/2)+r.clientWidth/2+"px",r.style["margin"==Transformie.defaults.centerOrigin?"marginTop":"top"]=-(r.offsetHeight/2)+r.clientHeight/2+"px")},computeMatrix:function(e){for(var r=e.match(/[A-z]+\([^\)]+/g)||[],t=[],a=0;a<r.length;a++){var s=r[a].split("(")[0],n=r[a].split("(")[1];switch(s){case"matrix":var i=n.split(",");t.push($M([[i[0],i[2],0],[i[1],i[3],0],[0,0,1]]));break;case"rotate":var o=Transformie.toRadian(n);t.push($M([[Math.cos(o),-Math.sin(o),0],[Math.sin(o),Math.cos(o),0],[0,0,1]]));break;case"scale":t.push($M([[n,0,0],[0,n,0],[0,0,1]]));break;case"scaleX":t.push($M([[n,0,0],[0,1,0],[0,0,1]]));break;case"scaleY":t.push($M([[1,0,0],[0,n,0],[0,0,1]]));break;case"skew":var o=Transformie.toRadian(n);t.push($M([[1,0,0],[Math.tan(o),1,0],[0,0,1]]));case"skewX":var o=Transformie.toRadian(n);t.push($M([[1,Math.tan(o),0],[0,1,0],[0,0,1]]));break;case"skewY":var o=Transformie.toRadian(n);t.push($M([[1,0,0],[Math.tan(o),1,0],[0,0,1]]))}}if(t.length){for(var f=t[0],a=0;a<t.length;a++)t[a+1]&&(f=f.x(t[a+1]));return f}}};jQuery(function(){navigator.userAgent.indexOf("MSIE ")!=-1&&(Transformie.defaults.stylesheets&&Transformie.parseStylesheets(),Transformie.inlineCSS&&Transformie.apply(Transformie.inlineCSS===!0?"*":Transformie.inlineCSS),Transformie.defaults.track&&Transformie.track(Transformie.defaults.track))});